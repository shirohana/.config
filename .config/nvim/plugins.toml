# ================================
# Plugin Manager
# ================================

# Dein
# https://github.com/Shougo/dein.vim
[[plugins]]
repo = 'Shougo/dein.vim'

# ================================
# Appearance
# ================================

# Airline
# https://github.com/vim-airline/vim-airline
[[plugins]]
repo = 'vim-airline/vim-airline-themes'
on_source = 'vim-airline'
[[plugins]]
repo = 'vim-airline/vim-airline'
rev = 'v0.10'
depends = 'vim-airline-themes'
lazy = 0
hook_add = 'source $NVIM_PLUGINS/airline.vim'

# Cursorword
# https://github.com/itchyny/vim-cursorword
[[plugins]]
repo = 'itchyny/vim-cursorword'
lazy = 0
hook_add = '''
  autocmd MyAutoCmd FileType nerdtree let b:cursorword = 0
'''

# Theme
# https://github.com/lifepillar/vim-solarized8
# https://github.com/overcache/NeoSolarized
# [[plugins]]
# repo = 'lifepillar/vim-solarized8'
[[plugins]]
repo = 'overcache/NeoSolarized'

# ================================
# File Navigation
# ================================

# CtrlSpace
# https://github.com/vim-ctrlspace/vim-ctrlspace
[[plugins]]
repo = 'vim-ctrlspace/vim-ctrlspace'
depends = 'fzf.vim'
lazy = 0
hook_add = 'source $NVIM_PLUGINS/ctrlspace.vim'

# NERDTree
# https://github.com/scrooloose/nerdtree
[[plugins]]
repo = 'scrooloose/nerdtree'
depends = 'nerdtree-git-plugin'
on_cmd = 'NERDTree'
hook_add = 'source $NVIM_PLUGINS/nerdtree.vim'
hook_post_source = 'source $NVIM_PLUGINS/nerdtree-post_source.vim'
[[plugins]]
repo = 'Xuyuanp/nerdtree-git-plugin'
lazy = 1

# ZFZ
# https://github.com/junegunn/fzf.vim
[[plugins]]
repo = 'junegunn/fzf'
hook_post_update = './install --bin'
# We need only executable
merged = 0
lazy = 1
[[plugins]]
repo = 'junegunn/fzf.vim'
on_cmd = ['FzfAg', 'Files', 'GFiles', 'Buffers', 'Ag', 'Tags', 'BTags', 'Marks', 'Windows', 'History:', 'Maps', 'Filetypes']
hook_source = 'source $NVIM_PLUGINS/fzf.vim'

# ================================
# Moving & Searching
# ================================

# EasyMotion
# https://github.com/easymotion/vim-easymotion
[[plugins]]
repo = 'easymotion/vim-easymotion'
hook_add = 'source $NVIM_PLUGINS/easymotion.vim'
lazy = 0

# Incsearch
# https://github.com/haya14busa/incsearch.vim
[[plugins]]
repo = 'haya14busa/incsearch.vim'
on_func = 'incsearch#'
[[plugins]]
repo = 'haya14busa/incsearch-easymotion.vim'
depends = ['incsearch.vim', 'vim-easymotion']
on_map = '<Plug>(incsearch-easymotion-'
[[plugins]]
repo = 'haya14busa/incsearch-fuzzy.vim'
depends = 'incsearch.vim'
on_map = '<Plug>(incsearch-fuzzy-'

# ================================
# Editing
# ================================

# AutoPairs
# https://github.com/shirohana/auto-pairs
[[plugins]]
repo = 'shirohana/auto-pairs'
lazy = 0
hook_add = 'source $NVIM_PLUGINS/auto-pairs.vim'

# BetterWhitespace
# https://github.com/ntpeters/vim-better-whitespace
[[plugins]]
repo = 'ntpeters/vim-better-whitespace'
on_event = 'BufEnter'
hook_add = '''
  let g:better_whitespace_operator = 0
  let g:show_spaces_that_precede_tabs = 1
  let g:strip_whitespace_confirm = 0
'''
hook_source = '''
  autocmd MyAutoCmd BufEnter * EnableStripWhitespaceOnSave
'''

# Commentary
# https://github.com/tpope/vim-commentary
[[plugins]]
repo = 'tpope/vim-commentary'
# on_map = ['<Plug>Commentary', '<Plug>ChangeCommentary']
on_map = '<Plug>Commentary'

# EasyAlign
# https://github.com/junegunn/vim-easy-align
[[plugins]]
repo = 'junegunn/vim-easy-align'
depends = 'vim-repeat'
on_map = ['<Plug>(EasyAlign', '<Plug>(LiveEasyAlign)']

# EditorConfig
# https://github.com/editorconfig/editorconfig-vim
[[plugins]]
repo = 'editorconfig/editorconfig-vim'
on_event = 'InsertEnter'
hook_add = '''
  let g:EditorConfig_disable_rules = [
    \ 'insert_final_newline',
    \ 'trim_trailing_whitespace',
    \ ]
'''

# GitGutter
# https://github.com/airblade/vim-gitgutter
[[plugins]]
repo = 'airblade/vim-gitgutter'
depends = 'vim-repeat'
on_func = 'gitgutter#'
on_event = 'BufEnter'
hook_add = '''
  let g:gitgutter_map_keys = 0
'''

# MultipleCursors
# https://github.com/terryma/vim-multiple-cursors
# [[plugins]]
# repo = 'terryma/vim-multiple-cursors'
# lazy = 1
# # on_event = 'BufEnter'
# hook_add = '''
#   let g:multi_cursor_use_default_mapping = 0
#   let g:multi_cursor_exit_from_visual_mode = 0
#   let g:multi_cursor_exit_from_insert_mode = 0
# '''

# Peekaboo
# https://github.com/junegunn/vim-peekaboo
[[plugins]]
repo = 'junegunn/vim-peekaboo'
lazy = 1
hook_add = '''
  autocmd MyAutoCmd BufEnter * let b:peekaboo_on = 1
  let g:peekaboo_delay = 1750
'''

# Signature
# https://github.com/kshenoy/vim-signature
[[plugins]]
repo = 'kshenoy/vim-signature'
on_event = 'BufEnter'

# SplitJoin
# https://github.com/AndrewRadev/splitjoin.vim
[[plugins]]
repo = 'AndrewRadev/splitjoin.vim'
on_map = '<Plug>Splitjoin'
hook_add = '''
  let g:splitjoin_join_mapping = 0
  let g:splitjoin_split_mapping = 0
'''

# Surround
# https://github.com/tpope/vim-surround
[[plugins]]
repo = 'tpope/vim-surround'
depends = 'vim-repeat'
on_map = [
  '<Plug>Csurround',
  '<Plug>CSurround',
  '<Plug>Dsurround',
  '<Plug>Ysurround',
  '<Plug>YSurround',
  '<Plug>Yssurround',
  '<Plug>YSsurround',
  '<Plug>VSurround',
  '<Plug>VgSurround'
]
hook_add = '''
  let g:surround_no_mappings = 1
'''

# UltiSnips
# https://github.com/SirVer/ultisnips
[[plugins]]
repo = 'SirVer/ultisnips'
on_event = 'InsertEnter'
on_ft = 'snippets'
hook_add = '''
  let g:UltiSnipsSnippetDirectories = [$NVIM_SNIPPETS]
  let g:UltiSnipsEnableSnipMate = 0
  autocmd MyAutoCmd BufWritePost *.snippets call UltiSnips#RefreshSnippets()
'''

# Undotree
# https://github.com/mbbill/undotree
[[plugins]]
repo = 'mbbill/undotree'
on_cmd = 'UndotreeToggle'
hook_add = 'source $NVIM_PLUGINS/undotree.vim'

# VisualMulti
# https://github.com/mg979/vim-visual-multi
[[plugins]]
repo = 'mg979/vim-visual-multi'
on_event = 'BufEnter'
hook_add = 'source $NVIM_PLUGINS/visual-multi.vim'

# ================================
# Utility
# ================================

# Repeat
# https://github.com/tpope/vim-repeat
[[plugins]]
repo = 'tpope/vim-repeat'
lazy = 1

# LSP
# https://github.com/neovim/nvim-lspconfig
# https://github.com/williamboman/nvim-lsp-installer
# https://github.com/tami5/lspsaga.nvim
# https://github.com/onsails/lspkind-nvim
[[plugins]]
repo = 'tami5/lspsaga.nvim'
hook_add = 'source $NVIM_PLUGINS/lspsaga.rc.lua'
[[plugins]]
repo = 'onsails/lspkind-nvim'
[[plugins]]
repo = 'neovim/nvim-lspconfig'
depends = ['lspsaga.nvim', 'lspkind-nvim', 'nvim-cmp']
on_ft = ['javascript', 'typescript', 'typescriptreact', 'typescript.tsx' 'python']
hook_add = 'source $NVIM_PLUGINS/lspconfig.rc.lua'
[[plugins]]
repo = 'williamboman/nvim-lsp-installer'
hook_source = 'source $NVIM_PLUGINS/lsp-installer.rc.lua'

# CMP Completion
# https://github.com/hrsh7th/nvim-cmp
# https://github.com/hrsh7th/cmp-buffer
# https://github.com/hrsh7th/cmp-nvim-lsp
# https://github.com/L3MON4D3/LuaSnip
[[plugins]]
repo = 'hrsh7th/cmp-buffer'
[[plugins]]
repo = 'L3MON4D3/LuaSnip'
[[plugins]]
repo = 'hrsh7th/nvim-cmp'
# depends = ['cmp-buffer', 'L3MON4D3/LuaSnip']
depends = ['cmp-buffer', 'lspkind-nvim']
# on_ft = ['javascript', 'typescript', 'typescriptreact', 'typescript.tsx' 'python']
hook_add = '''
  source $NVIM_PLUGINS/cmp.rc.lua
  " set completeopt=menuone,noinsert,noselect
'''
[[plugins]]
repo = 'hrsh7th/cmp-nvim-lsp'
depends = ['nvim-lspconfig']

# TreeSitter
# https://github.com/nvim-treesitter/nvim-treesitter
[[plugins]]
repo = 'nvim-treesitter/nvim-treesitter'
hook_add = 'source $NVIM_PLUGINS/treesitter.rc.lua'
hook_source = 'TSUpdate'

# Syntax checking
# https://github.com/vim-syntastic/syntastic
# https://github.com/dense-analysis/ale
# [[plugins]]
# repo = 'vim-syntastic/syntastic'
# on_ft = ['javascript', 'typescript', 'python']
# hook_add = '''
#   let g:syntastic_always_populate_loc_list = 1
#   let g:syntastic_loc_list_height = 4
#   let g:syntastic_auto_loc_list = 1
#   let g:syntastic_check_on_open = 0
#   let g:syntastic_cursor_column = 0
#   let g:syntastic_check_on_wq = 0
#   let g:syntastic_python_checkers = ['pylint']
#   let g:syntastic_javascript_checkers = []
#   let g:syntastic_javascript_eslint_exe = '$(yarn global bin)/eslint'
#   let g:syntastic_javascript_eslint_args = '--cache'
#   let g:syntastic_javascript_flow_exe = '$(yarn global bin)/flow'
# '''
# [[plugins]]
# repo = 'dense-analysis/ale'
# on_ft = ['javascript', 'typescript', 'stylus']
# on_cmd = 'ALE'
# on_map = '<Plug>(ale_'
# hook_add = '''
#   let g:ale_hover_cursor = 0
#   let g:ale_cursor_detail = 0
#   let g:ale_floating_preview = 1
#   let g:ale_hover_to_floating_preview = 0
#   let g:ale_detail_to_floating_preview = 0
#   let g:ale_close_preview_on_insert = 1
#   let g:ale_lint_on_insert_leave = 1
#   let g:ale_lint_on_text_changed = 'never'

#   let g:ale_json_jsonlint_use_global = 1
#   let g:ale_json_spectral_use_global = 1

#   let g:ale_completion_autoimport = 1
#   let g:ale_completion_enabled = 1

#   " 'json': ['jsonlint', 'spectral'],
#   let g:ale_linters = {
#     \ 'javascript': ['flow', 'eslint'],
#     \ 'json': ['jsonlint'],
#     \ 'stylus': ['stylelint'],
#     \ 'typescript': ['eslint', 'tslint', 'tsserver'],
#     \ }
#   " WIP
#   let g:ale_linter_aliases = {
#     \ 'mdx': 'typescript',
#     \ }

#   let g:ale_stylus_stylelint_options = '--custom-syntax stylelint-plugin-stylus/custom-syntax'
# '''

# ================================
# Language
# ================================

# AppleScript .applescript
# https://github.com/dearrrfish/vim-applescript
# [[plugins]]
# repo = 'dearrrfish/vim-applescript'
# on_ft = 'applescript'

# CSS3 .css
# https://github.com/hail2u/vim-css3-syntax
# https://github.com/ap/vim-css-color
[[plugins]]
repo = 'hail2u/vim-css3-syntax'
on_ft = 'css'
hook_add = '''
  autocmd MyAutoCmd FileType css setlocal iskeyword+=-
'''
[[plugins]]
repo = 'ap/vim-css-color'
on_ft = ['css', 'stylus', 'html', 'javascript', 'typescript']

# Dockerfile docker-compose.yml
# https://github.com/ekalinin/Dockerfile.vim
# [[plugins]]
# repo = 'ekalinin/Dockerfile.vim'
# on_ft = ['Dockerfile', 'docker-compose']

# HTML5 .html .htm
# https://github.com/othree/html5.vim
# https://github.com/mattn/emmet-vim
# [[plugins]]
# repo = 'othree/html5.vim'
# on_ft = 'html'
# hook_add = '''
#   let g:html5_event_handler_attributes_complete = 0
#   let g:html5_rdfa_attributes_complete = 0
#   let g:html5_microdata_attributes_complete = 0
#   let g:html5_aria_attributes_complete = 0
# '''
# [[plugins]]
# repo = 'mattn/emmet-vim'
# on_cmd = 'Emmet'
# # on_ft = ['html', 'javascript']
# # on_map = '<Plug>(emmet-'
# hook_add = '''
#   let g:user_emmet_install_global = 1
#   let g:user_emmet_leader_key = '<C-q>'
#   " autocmd FileType javascript EmmetInstall
# '''

# JavaScript .js
# TypeScript .ts
# https://github.com/pangloss/vim-javascript
# https://github.com/leafgarland/typescript-vim
# https://github.com/gavocanov/vim-js-indent
# https://github.com/mxw/vim-jsx
# https://github.com/MaxMEllon/vim-jsx-pretty
# https://github.com/Quramy/vim-js-pretty-template
# [[plugins]]
# repo = 'pangloss/vim-javascript'
# lazy = 0 # on_ft = 'javascript'
# hook_add = '''
#   let g:javascript_plugin_flow = 1
# '''
# [[plugins]]
# repo = 'leafgarland/typescript-vim'
# on_ft = ['typescript']
# hook_add = '''
#   let g:typescript_indent_disable = 1
# '''
# [[plugins]]
# repo = 'gavocanov/vim-js-indent'
# depends = ['vim-javascript']
# on_ft = ['javascript', 'typescript']
# [[plugins]]
# repo = 'mxw/vim-jsx'
# depends = ['vim-javascript', 'splitjoin.vim']
# lazy = 1 # on_ft = 'javascript'
# [[plugins]]
# repo = 'MaxMEllon/vim-jsx-pretty'
# depends = 'vim-javascript'
# on_ft = ['javascript', 'typescript']
# hook_add = '''
#   let g:vim_jsx_pretty_colorful_config = 0
#   let g:vim_jsx_pretty_highlight_close_tag = 0
# '''
# [[plugins]]
# repo = 'Quramy/vim-js-pretty-template'
# depends = ['vim-pug', 'vim-jsx']
# on_ft = ['javascript', 'typescript']
# hook_source = '''
#   call jspretmpl#register_tag('pug', 'pug')
#   call jspretmpl#register_tag('yaml', 'yaml')
#   autocmd MyAutoCmd FileType javascript.* JsPreTmpl
# '''

# Markdown .md
# https://github.com/plasticboy/vim-markdown
# https://github.com/JamshedVesuna/vim-markdown-preview
# [[plugins]]
# repo = 'plasticboy/vim-markdown'
# on_ft = 'markdown'
# hook_add = '''
#   let g:vim_markdown_no_default_key_mappings = 1
#   let g:vim_markdown_new_list_item_indent = 2
#   let g:vim_markdown_folding_disabled = 1
#   let g:vim_markdown_conceal = 0
# '''
# [[plugins]]
# repo = 'JamshedVesuna/vim-markdown-preview'
# on_ft = 'markdown'
# hook_add = '''
#   let g:vim_markdown_preview_toggle = -1
#   let g:vim_markdown_preview_github = 1
#   let g:vim_markdown_preview_browser = 'Safari'
# '''

# MDX .mdx
# https://github.com/jxnblk/vim-mdx-js
# [[plugins]]
# repo = 'jxnblk/vim-mdx-js'
# on_ft = 'mdx'

# Nginx conf
# https://github.com/chr4/nginx.vim
# [[plugins]]
# repo = 'chr4/nginx.vim'
# on_ft = 'nginx'

# PlantUML .uml
# https://github.com/aklt/plantuml-syntax
# https://github.com/tyru/open-browser.vim
# https://github.com/weirongxu/plantuml-previewer.vim
[[plugins]]
repo = 'aklt/plantuml-syntax'
on_ft = ['uml', 'plantuml']
[[plugins]]
repo = 'tyru/open-browser.vim'
hook_add = '''
  let g:openbrowser_browser_commands = [
    \ {'name': 'open', 'args': ['{browser}', '-a', 'Safari', '{uri}'], 'background': 0}
    \ ]
'''
[[plugins]]
repo = 'weirongxu/plantuml-previewer.vim'
depends = 'open-browser.vim'
on_cmd = 'Plantuml'
hook_add = '''
  let g:plantuml_previewer#plantuml_jar_path = get(
    \  matchlist(system('cat `which plantuml` | grep plantuml.jar'), '\v.*\s[''"]?(\S+plantuml\.jar).*'),
    \  1,
    \  0
    \)
'''

# Pug .pug
# https://github.com/digitaltoad/vim-pug
# [[plugins]]
# repo = 'digitaltoad/vim-pug'
# depends = ['html5.vim', 'vim-javascript', 'vim-css3-syntax']
# on_ft = 'pug'

# Python .py
# https://github.com/davidhalter/jedi-vim
[[plugins]]
repo = 'davidhalter/jedi-vim'
on_ft = 'python'
on_cmd = 'Pyimport'
on_func = 'jedi#'
hook_add = 'source $NVIM_PLUGINS/jedi.vim'
# hook_source = '''
#   # call jedi#configure_call_signatures()
# '''

# Stylus .styl
# https://github.com/shirohana/vim-stylus
[[plugins]]
repo = 'shirohana/vim-stylus'
depends = ['vim-css3-syntax']
on_ft = 'stylus'

# TOML .toml
# https://github.com/cespare/vim-toml
[[plugins]]
repo = 'cespare/vim-toml'
on_ft = 'toml'

# Vue .vue
# https://github.com/posva/vim-vue
# [[plugins]]
# repo = 'posva/vim-vue'
# depends = ['html5.vim', 'vim-pug', 'vim-javascript', 'vim-css3-syntax', 'vim-stylus']
# on_ft = 'vue'
